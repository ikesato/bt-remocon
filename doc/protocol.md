プロトコル仕様
==============

マイコンとBluetoothモジュールの通信プロトコルの仕様です。
入出力の方向はマイコン側を中心に考えて以下とします。
* 入力方向 マイコン <- Bluetooth
* 出力方向 マイコン -> Bluetooth



仕様
----
* データ長は入出力ともに最大64バイトまで
* データは ASCII コードでやりくりする
* データの終端は改行コード
 * 入力は \r または \n を終端とする
 * 出力は \r\n


入出力仕様
----------

* リモコン信号の Bluetooth から受信
 リモコン信号の各 HI/LO の長さを受信し、赤外線LEDを点滅させます。
 - HI/LO それぞれの長さの単位 : ??? [usec]
 - 区切り文字はカンマ
 - HI/LO を表すために各データの頭に 'H' または 'L' をつける

 例
 ```
 H123,L456,TODO....\n
 ```

* リモコン信号を赤外受信モジュールから受信した際の信号を Bluetooth へ送信
 TODO:

* リモコン信号のエコー送信
 TODO:リモコン信号をエコーします。
 リモコン信号受信エラー時などにも解析するためにエコーします。


* 赤外LED点灯後のACK送信

リモコン信号を赤外LEDに点灯後に、文字列 "OK" をBluetoothへ出力します。


* エラー時にはエラー文字列をマイコンから送信します

例. リモコン信号受信エラー
```
parse error. need 'H' or 'L'. [%d,%c]\r\n
```
%d にはリモコン受信時にパースエラーとなったバッファの位置を示します。
%c はパースエラーとなった文字を格納します。

エラーコードとかめんどくさくて持ちたくなかったので、エラー文字列などは適当にしてます。
まあたいしたコード量でもないので、見ればだいたい分かるかと思います。
